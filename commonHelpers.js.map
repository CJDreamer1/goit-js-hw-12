{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// ============================================ ФУНКЦІЯ, ЩО СТВОРЮЄ КУР'ЄРА ================================================\nimport axios from 'axios';\n\nexport async function getArticles(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const url = BASE_URL;\n\n  const params = {\n    key: '43041849-c8f652645a26d9036757deffe',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import { gallery } from '../main';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport { loader } from '../main';\n\n// ======================================== функція, яка створює розмітку для одного елемента ===================================\nexport function articleTemplate(obj) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = obj;\n  return `<li class=\"modal\">\n          <a class=\"gallery-link\" href=\"${webformatURL}\">\n            <img loading=\"lazy\" class=\"gallery-image\" src=\"${largeImageURL}\" data-source=\"${webformatURL}\" alt=\"${tags}\">\n          </a>\n          <div class=\"div-info\">\n            <p class=\"p-info\"><span class=\"p-span\">Likes</span> ${likes}</p>\n            <p class=\"p-info\"><span class=\"p-span\">Views</span> ${views}</p>\n            <p class=\"p-info\"><span class=\"p-span\">Coments</span> ${comments}</p>\n            <p class=\"p-info\"><span class=\"p-span\">Downloads</span> ${downloads}</p>\n          </div>\n        </li>`;\n}\n\n// ================================================ функція яка створює розимітку для масива ====================================\nfunction articlesTemplate(arr) {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh(); // Оновлюємо lightbox\n  return arr.map(articleTemplate).join('');\n}\n\n// ============================================ викликаємо розмітку =======================================\nexport function renderArticles(arr) {\n  const markup = articlesTemplate(arr);\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import { getArticles } from './js/pixabay-api.js';\nimport { articleTemplate } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderArticles } from './js/render-functions.js';\n\nexport const gallery = document.querySelector('.gallery');\nexport const formEl = document.querySelector('.form');\nexport const loader = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.load-more');\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\n// =========================================== СТВОРЕННЯ РОЗМІТКИ ==================================================\n\nformEl.addEventListener('submit', onFormSubmit);\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\n\n// ==============================================================================================================\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  try {\n    loader.classList.remove('loader-hidden'); // Показати анімацію перед запитом\n    const query = e.target.elements.query.value.trim(); // Отримання значення поля вводу\n    const data = await getArticles(query, currentPage);\n\n    maxPage = Math.ceil(data.totalHits / pageSize); // Округляємо кількість запитів що нам будуть доступні\n\n    renderArticles(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n\n  loader.classList.add('loader-hidden'); // Сховати анімацію після запиту\n\n  checkBtnStatus();\n  e.target.reset();\n}\n// ========================================== Слухач події на кнопку Load More ==================================\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  loader.classList.remove('loader-hidden'); // Показати анімацію перед запитом\n  try {\n    const data = await getArticles(query, currentPage);\n    renderArticles(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n  myScroll();\n  checkBtnStatus();\n  loader.classList.add('loader-hidden'); // Сховати анімацію після запиту\n}\n// ====================================== Ховаємо кнопку Load More ==============================================\nfunction showLoadMore() {\n  btnLoadMore.classList.remove('hidden');\n}\nfunction hideLoadMore() {\n  btnLoadMore.classList.add('hidden');\n}\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.error({\n      position: 'topRight',\n      color: 'blue',\n      title: 'Error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMore();\n  }\n}\n// ====================================== Додаємо скролл після підгрузки нових картинок ===============================\nfunction myScroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}\n// =================================================================================================================\n"],"names":["getArticles","query","currentPage","url","params","axios","articleTemplate","obj","webformatURL","largeImageURL","tags","likes","views","comments","downloads","articlesTemplate","arr","SimpleLightbox","renderArticles","markup","gallery","formEl","loader","btnLoadMore","maxPage","pageSize","onFormSubmit","onLoadMoreClick","e","data","error","checkBtnStatus","myScroll","showLoadMore","hideLoadMore","iziToast","height"],"mappings":"owBAGO,eAAeA,EAAYC,EAAOC,EAAa,CAEpD,MAAMC,EADW,2BAGXC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EAGE,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCZO,SAASE,EAAgBC,EAAK,CACnC,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,0CACiCC,CAAY;AAAA,6DACOC,CAAa,kBAAkBD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,kEAGpDC,CAAK;AAAA,kEACLC,CAAK;AAAA,oEACHC,CAAQ;AAAA,sEACNC,CAAS;AAAA;AAAA,cAG/E,CAGA,SAASC,EAAiBC,EAAK,CAM7B,OALiB,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,EACTD,EAAI,IAAIV,CAAe,EAAE,KAAK,EAAE,CACzC,CAGO,SAASY,EAAeF,EAAK,CAClC,MAAMG,EAASJ,EAAiBC,CAAG,EACnCI,EAAQ,mBAAmB,YAAaD,CAAM,CAChD,CCvCO,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAS,SAAS,cAAc,SAAS,EAChDC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAItB,EACAC,EAAc,EACdsB,EAAU,EACd,MAAMC,EAAW,GAIjBJ,EAAO,iBAAiB,SAAUK,CAAY,EAC9CH,EAAY,iBAAiB,QAASI,CAAe,EAGrD,eAAeD,EAAaE,EAAG,CAC7BA,EAAE,eAAc,EAChBR,EAAQ,UAAY,GACpBlB,EAAc,EAEd,GAAI,CACFoB,EAAO,UAAU,OAAO,eAAe,EACvC,MAAMrB,EAAQ2B,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCC,EAAO,MAAM7B,EAAYC,EAAOC,CAAW,EAEjDsB,EAAU,KAAK,KAAKK,EAAK,UAAYJ,CAAQ,EAE7CP,EAAeW,EAAK,IAAI,CACzB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDR,EAAO,UAAU,IAAI,eAAe,EAEpCS,IACAH,EAAE,OAAO,OACX,CAGA,eAAeD,GAAkB,CAC/BzB,GAAe,EACfoB,EAAO,UAAU,OAAO,eAAe,EACvC,GAAI,CACF,MAAMO,EAAO,MAAM7B,EAAYC,EAAOC,CAAW,EACjDgB,EAAeW,EAAK,IAAI,CACzB,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACDE,IACAD,IACAT,EAAO,UAAU,IAAI,eAAe,CACtC,CAEA,SAASW,GAAe,CACtBV,EAAY,UAAU,OAAO,QAAQ,CACvC,CACA,SAASW,GAAe,CACtBX,EAAY,UAAU,IAAI,QAAQ,CACpC,CACA,SAASQ,GAAiB,CACpB7B,GAAesB,GACjBU,IACAC,EAAS,MAAM,CACb,SAAU,WACV,MAAO,OACP,MAAO,QACP,QAAS,4DACf,CAAK,GAEDF,GAEJ,CAEA,SAASD,GAAW,CAClB,MAAMI,EAAShB,EAAQ,WAAW,sBAAqB,EAAG,OAC1D,SAAS,CACP,IAAKgB,EAAS,EACd,SAAU,QACd,CAAG,CACH"}